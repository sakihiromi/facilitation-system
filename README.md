# AIファシリテーションシステム 🌿

**はたらくウェルビーイング** を探求するための5週間AIファシリテーションシステムです。

## 📋 概要

このシステムは、AIファシリテーションシステムです。5週間にわたる1on1セッションを通じて、参加者の「はたらくウェルビーイング」を探求し、最終的に行動プランの策定をサポートします。

## 🎯 ファシリテーションの原則

このシステムは、以下の原則に基づいてファシリテーションを行います：

### 1. 傾聴と共感
- 参加者の言葉を丁寧に受け止め、その背景にある想いや感情に寄り添います
- 評価せず、ありのままを受け入れる姿勢を示します

### 2. 本質への深堀り
- 表面的な答えに留まらず、「なぜ？」「それはどういうこと？」と優しく掘り下げます
- 具体的なエピソードと抽象的な価値観を行き来します

### 3. 安心安全な場づくり
- 参加者が自分の想いを素直に話せる雰囲気を作ります
- 沈黙も大切にし、考える時間を尊重します

### 4. 主体性の尊重
- 答えを押し付けず、参加者自身が気づき、決めることを大切にします
- 小さな一歩を応援し、完璧を求めません

## 💬 会話モード

参加者の好みに合わせて、3つの会話モードから選択できます：

### ライトモード（💬 気軽に話す）
- 質問は控えめに、相手の話を聞くことを優先
- 深堀りは最小限
- リラックスした雰囲気
- 1回の発言は50-100文字程度と短め
- **こんな人におすすめ**: 気軽に話したい、プレッシャーを感じたくない

### スタンダードモード（⚖️ バランス型）
- 適度な深堀りと傾聴のバランス
- 質問と共感のバランスが取れた対話
- 1回の発言は100-200文字程度
- **こんな人におすすめ**: バランスの取れた対話を望む（デフォルト）

### ディープモード（🔍 じっくり探求）
- より深い対話を心がける
- 積極的な深堀りと本質的な探求
- 矛盾や葛藤があれば、それを一緒に探求する
- じっくり考える時間を提供
- **こんな人におすすめ**: 自己理解を深めたい、時間をかけて探求したい

## ⏱️ セッションの長さ

参加者の都合に合わせて、3つの長さから選択できます：

### 短め（⚡ 10-15分）
- 重要なポイントに絞って対話
- 効率的に核心に迫る質問
- 8-10回程度のやり取りで完結
- **こんな時におすすめ**: 時間がない時、要点だけ話したい時

### 標準（⏱️ 20-30分）
- バランスの取れた対話時間
- 15-20回程度のやり取りで完結
- 適度な深堀りと振り返り
- **こんな時におすすめ**: 通常のセッション（デフォルト）

### 長め（🕐 40-60分）
- じっくり時間をかけた対話
- 25-35回程度のやり取りで完結
- 一つ一つのテーマを丁寧に掘り下げ
- 具体的なエピソードや背景も詳しく聞く
- **こんな時におすすめ**: 深く探求したい時、まとまった時間がある時

## 🗓️ 週ごとのテーマ

> **📌 プログラム構成について**
> 
> 本プログラムは元々4週構成のシナリオですが、1週目と2週目の間に「雑談会」を追加したため、**システム上は5週構成**となっています。

| システム週 | シナリオ週 | 範囲 | テーマ |
|------------|------------|------|--------|
| 1週目 | 1週目 | I（個人） | あなたの"はたらくウェルビーイング"は？ |
| 2週目 | （追加） | Chat | 雑談会 ☕ |
| 3週目 | 2週目 | WE（部署） | あなたはどんな仕事をしている？ |
| 4週目 | 3週目 | S（PERSOLグループ） | あなたの会社について教えてください |
| 5週目 | 4週目 | 統合 | 統合フェーズ - 行動プラン |

---

### 1週目：あなたの"はたらくウェルビーイング"は？（シナリオ1週目）

| 項目 | 内容 |
|------|------|
| **視点** | I（個人） |
| **目的** | 個人の価値観の探求、自己理解を深める |
| **ゴール** | 「価値観」を起点にした自己理解が深まった状態 |
| **大事にしたいこと** | その人のありのままの価値観を受容し、その人らしい「はたらくWell-being」を引き出す |
| **対話の流れ** | チェックイン → 価値観TOP3 → 背景・理由の深堀り → 自己理解 → リフレクション |

### 2週目：雑談会 ☕（追加セッション）

| 項目 | 内容 |
|------|------|
| **視点** | Chat（雑談） |
| **目的** | Week 1のフィードバック収集とリラックスした対話 |
| **ゴール** | リラックスして話せ、次回以降のセッションがより良いものになること |
| **大事にしたいこと** | 前回セッションの感想を聞く、趣味・興味などその人をより深く知る |
| **対話の流れ** | 雑談モードまたは占いモード（30種類以上の占術）から選択 |

### 3週目：あなたはどんな仕事をしている？（シナリオ2週目）

| 項目 | 内容 |
|------|------|
| **視点** | WE（組織・部署） |
| **目的** | 組織（部署）と「私」の関わりの探求、解像度向上 |
| **ゴール** | 組織（部署）の仕事の意義・価値と、自分がはたらくうえで成し遂げたいことの重なりについて、解像度が高まった状態 |
| **大事にしたいこと** | 本人が本音を話せる設計、重なりがないときも「なぜ」を探求、AIの問いかけで新たな視点を提供 |
| **対話の流れ** | 前回振り返り → 部署のミッション → 部署の価値観TOP3 → 自分との重なり → リフレクション |

### 4週目：あなたの会社について教えてください（シナリオ3週目）

| 項目 | 内容 |
|------|------|
| **視点** | S（PERSOLグループ） |
| **目的** | 組織（PERSOLグループ）と「私」の関わりの探求、解像度向上 |
| **ゴール** | PERSOLグループの仕事の意義・価値と、自分がはたらくうえで成し遂げたいことの重なりについて、解像度が高まった状態 |
| **大事にしたいこと** | その人なりのPERSOLの価値の言語化・持論を引き出す、PERSOL人として言語化できるよう支援 |
| **対話の流れ** | 前回振り返り → PERSOLのミッション → PERSOLの価値観TOP3 → 自分との重なり → リフレクション |

### 5週目：統合フェーズ - 行動プラン（シナリオ4週目）

| 項目 | 内容 |
|------|------|
| **視点** | 統合（I/WE/S） |
| **目的** | IとWEとSの統合により、自身およびPERSOLではたらくことの意義や価値について理解を深める |
| **ゴール** | はたらく自分自身のこと、PERSOLではたらくことの自分なりの意義や価値について、内省の深まりを実感できた状態。言語化したものの解像度が高まっている状態 |
| **大事にしたいこと** | 日常への接続まで対話する、今日の答えはβ版・考え続けてほしい |
| **対話の流れ** | Day1〜3のまとめ → 振り返り → 価値観TOP3再確認 → 「PERSOLで実現したいWell-being」言語化 → 日常での行動 → クロージング |
| **アウトプット** | 統合レポート（はたらくWell-being、組織との関わり・重なりのサマリ） |

## 🔮 占い機能（2週目：雑談会）

2週目の雑談会では、占いモードを選択できます。30種類以上の占術から選択可能：

### 西洋系占術
- タロット占い、西洋占星術、数秘術、カバラ数秘術、ルーン占い
- オラクルカード、ペンデュラム占い、水晶占い、茶葉占い、手相占い

### 東洋系占術
- 四柱推命、算命学、紫微斗数、九星気学、易占い（周易）
- おみくじ、気学、陰陽道

### その他の占術
- インド占星術（ジョーティシュ）
- マヤ暦占星術、アステカ占星術
- 誕生花占い、誕生石占い、誕生色占い、誕生日占い
- 姓名判断、漢字占い
- オーラリーディング、チャクラリーディング、エネルギーヒーリング
- MBTI診断、エニアグラム、ビッグファイブ性格診断、血液型占い
- 動物占い、樹木占い、花占い
- 夢占い、風水、人相占い、筆跡占い、バイオリズム、ラッキーアイテム占い、相性占い

### 占いモードの選択肢
- **自分で選ぶ**: 好きな占術を選択
- **お任せ占い**: AIが対話の内容から最適な占術を2〜3種類選択

## 🚀 セットアップ

### 必要条件

- Node.js 18以上
- OpenAI API キー（GPT-4 および DALL-E 3 が利用可能なもの）

### インストール

```bash
# 依存関係のインストール
npm install

# 環境変数の設定
cp env.template .env
# .env ファイルを編集してOpenAI APIキーを設定
```

### 起動

```bash
npm start
```

ブラウザで http://localhost:3000 にアクセスしてください。

## 💡 機能

### 1. 週別1on1セッション
- 各週10〜60分程度の対話セッション（長さは選択可能）
- AIファシリテーターによる質問と深堀り
- セッションタイマー機能
- 会話モード選択（ライト/スタンダード/ディープ）

### 2. 進行管理
- 週ごとの進行状況表示
- 前週完了で次週がアンロック
- セッション履歴の保存
- **前回レポート表示機能**: 完了した週をクリックするとレポートを閲覧可能

### 3. 可視化・記事化
- セッション終了時に自動で記事生成
- **多角的レポート出力**: I/WE/Sの3つの視点から価値観を分析
- 対話のハイライト抽出
- 価値観の整理・まとめ
- **説明性のあるイメージ図の自動生成**（DALL-E 3使用）：インフォグラフィック風の分かりやすい図を生成

### 4. コンテキスト継承
- 過去のセッション内容を次週に引き継ぎ
- 事前情報の活用
- 一貫した対話体験

### 5. 日本語入力対応
- IME変換中のEnterキー誤送信を防止
- 日本語入力時の快適な操作性

### 6. セッション永続化
- セッションデータをJSONファイルに自動保存
- セッションの再開機能
- セッションの手動保存機能

### 7. 占い機能（2週目）
- 30種類以上の占術から選択
- AIによるお任せ占術選択
- 占いを通じた自己理解の深化

### 8. 音声入力モード 🆕
- マイクボタンを押しながら話すと音声入力
- Web Speech APIを使用
- 日本語音声認識対応

### 9. 読み上げモード 🆕
- AIの応答を自動で読み上げ（デフォルトでON）
- 読み上げのON/OFF切り替え可能
- 停止ボタンで読み上げを途中停止

### 10. WEワークの多角的視点 🆕
- 部下、同僚、上司、清掃員など様々な視点から自分を見つめ直す
- 「他者から見た自分」を通じて新しい気づきを得る

### 11. 連想提案機能 🆕
- 「もしかしてこれも大事ですか？」とシステムが価値観を連想提案
- 参加者の発言から関連する価値観を引き出す

### 12. アンケート機能 🆕
- セッション終了後に効果測定用アンケートを表示
- 回答は個人を特定しない形で集計（プライバシー保護を明記）
- 満足度、気づき、話しやすさ、次回への意欲を測定

### 13. Git同期機能 🆕
- ワンクリックでGitリポジトリと同期
- 配布後のPCでも簡単にデータを最新化
- プルとプッシュを自動実行

### 14. 人事向け詳細レポート出力 🆕
- 1〜5週目の全セッション結果とアンケートをまとめたレポートを自動生成
- **5週目完了時に自動生成**（ユーザーには通知せず裏で生成）
- `output/ユーザー名/` フォルダに以下を出力:
  - `1週目.md` 〜 `5週目.md`: 各週の詳細レポート（シナリオの目的・ゴール含む）
  - `まとめ.md`: **ユーザー目線**のレポート（温かいトーン、自己振り返り用）
  - `包括的レポート.md`: **人事目線**のレポート（客観的分析、I/WE/S所見、推奨アクション）
- 全ユーザー一括出力にも対応

## 🏗️ 技術構成

- **バックエンド**: Node.js + Express
- **AI（対話）**: OpenAI GPT-4
- **AI（画像生成）**: OpenAI DALL-E 3
- **フロントエンド**: Vanilla JavaScript
- **スタイル**: CSS3 (CSS Variables, Flexbox, Grid)
- **データ永続化**: JSONファイル
- **音声入力**: Web Speech API (SpeechRecognition)
- **音声読み上げ**: Web Speech API (SpeechSynthesis)

## 📁 ファイル構成

```
facilitation-system/
├── server.js          # Express サーバー
├── package.json       # 依存関係
├── env.template       # 環境変数テンプレート
├── README.md          # このファイル
├── data/
│   ├── sessions/      # セッションデータ保存用
│   └── surveys/       # アンケート回答保存用 🆕
├── output/            # レポート出力先 🆕
│   └── ユーザー名/
│       ├── 1週目.md          # 各週の詳細レポート
│       ├── 2週目.md
│       ├── 3週目.md
│       ├── 4週目.md
│       ├── 5週目.md
│       ├── まとめ.md          # ユーザー目線のまとめ
│       └── 包括的レポート.md   # 人事目線の包括的レポート
└── public/
    ├── index.html     # メインHTML
    ├── styles.css     # スタイルシート
    ├── app.js         # フロントエンドJS
    ├── fortune.js     # 占い機能JS
    └── images/        # 生成画像保存用
```

### レポートの種類

| ファイル | 対象 | 内容 |
|----------|------|------|
| `1週目.md` 〜 `5週目.md` | 記録用 | 各週のセッション記録、シナリオ情報、アンケート結果、ゴール達成度 |
| `まとめ.md` | ユーザー向け | 温かいトーンで書かれた自己振り返り用レポート、価値観マップ、これからの一歩 |
| `包括的レポート.md` | 人事向け | 客観的分析、I/WE/Sの視点からの所見、エンゲージメント状態、推奨アクション |

## 🔌 API エンドポイント

### セッション管理
| メソッド | エンドポイント | 説明 |
|----------|----------------|------|
| POST | `/api/session/start` | セッション開始 |
| POST | `/api/session/end` | セッション終了・要約生成 |
| POST | `/api/session/save` | セッション手動保存 |
| POST | `/api/session/resume` | セッション再開 |
| GET | `/api/session/check/:userId/:week` | 既存セッションチェック |
| GET | `/api/session/report/:userId/:week` | セッションレポート取得 |
| GET | `/api/sessions/:userId` | セッション一覧取得 |

### 対話
| メソッド | エンドポイント | 説明 |
|----------|----------------|------|
| POST | `/api/chat` | メッセージ送信 |
| POST | `/api/chat/greeting` | 最初の挨拶を取得 |

### 占い機能
| メソッド | エンドポイント | 説明 |
|----------|----------------|------|
| GET | `/api/fortune-types` | 占術一覧取得 |
| POST | `/api/session/set-fortune` | 占術設定 |
| POST | `/api/session/omakase-fortune` | お任せ占い |

### アンケート機能 🆕
| メソッド | エンドポイント | 説明 |
|----------|----------------|------|
| GET | `/api/survey/questions` | アンケート設問取得 |
| POST | `/api/survey/submit` | アンケート回答送信 |

### Git同期機能 🆕
| メソッド | エンドポイント | 説明 |
|----------|----------------|------|
| POST | `/api/git/sync` | Git同期（add/commit/push） |
| POST | `/api/git/pull` | 最新データ取得（pull） |

### 人事向けレポート出力 🆕
| メソッド | エンドポイント | 説明 |
|----------|----------------|------|
| POST | `/api/report/generate` | 個別ユーザーのレポート生成 |
| POST | `/api/report/generate-all` | 全ユーザーのレポート一括生成 |

## 🔧 カスタマイズ

### ファシリテーション内容の調整

`server.js` の `weeklyConfig` オブジェクトを編集することで、各週のテーマや質問内容をカスタマイズできます。

```javascript
const weeklyConfig = {
  1: {
    theme: 'テーマ名',
    perspective: '視点',
    systemPrompt: 'AIへの指示...'
  },
  // ...
};
```

### 会話モードの調整

`server.js` の `conversationModes` オブジェクトを編集することで、会話スタイルをカスタマイズできます。

```javascript
const conversationModes = {
  light: {
    name: 'ライトモード',
    description: '気軽に話す',
    modifier: '/* AIへの追加指示 */'
  },
  // ...
};
```

### セッション長さの調整

`server.js` の `sessionLengths` オブジェクトを編集することで、セッション時間の目安をカスタマイズできます。

```javascript
const sessionLengths = {
  short: {
    name: '短め',
    description: '10-15分',
    targetMinutes: 15,
    modifier: '/* AIへの追加指示 */'
  },
  // ...
};
```

### 占術の追加

`server.js` の `fortuneTypes` オブジェクトを編集することで、新しい占術を追加できます。

```javascript
const fortuneTypes = {
  tarot: 'タロット占い',
  western_astrology: '西洋占星術',
  // 新しい占術を追加...
};
```

## 💭 使い方のヒント

### 参加者の方へ

1. **リラックスして**: 正解はありません。思ったことを素直に話してください
2. **具体的に**: 抽象的な言葉だけでなく、具体的なエピソードも話してみてください
3. **考える時間を大切に**: すぐに答えが出なくても大丈夫です
4. **振り返りを活用**: 各週の記事を読み返すと、新たな気づきがあるかもしれません
5. **自分に合ったモードで**: 会話モードと長さは自由に選んでください
6. **占いも楽しんで**: 2週目の雑談会では、占いを通じた新しい自己発見もできます
7. **音声入力を活用**: 🎤ボタンを押しながら話すと、音声で入力できます
8. **読み上げ機能**: AIの応答は自動で読み上げられます（右上の🔊ボタンでON/OFF）

### ファシリテーターの方へ（カスタマイズする場合）

1. **傾聴を第一に**: AIの応答を参考にしつつ、参加者の言葉を大切にしてください
2. **深堀りのタイミング**: 表面的な答えの奥に、本当の想いがあります
3. **つながりを見出す**: 各週の内容を統合し、全体像を一緒に描いてください
4. **応援する姿勢**: 参加者の可能性を信じ、温かく応援してください

### 管理者の方へ

1. **Git同期**: サイドバーの「Git同期」ボタンでデータをリポジトリに同期できます
2. **アンケート結果**: `data/surveys/` フォルダにアンケート回答が保存されます
3. **効果測定**: アンケートデータを集計して効果測定に活用できます
4. **レポート自動生成**: 5週目完了時に `output/ユーザー名/` に全レポートが自動生成されます
5. **手動レポート生成**: サイドバーの「レポート出力」ボタンで任意のタイミングでも生成可能です
6. **レポートの使い分け**:
   - `まとめ.md`: ユーザー本人へのフィードバックに使用
   - `包括的レポート.md`: 人事担当者・上司の参考資料として使用（本人への開示は不要）

## 📝 ライセンス

Private

---

開発: 2025年12月  
最終更新: 2026年1月
